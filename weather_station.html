<!--
  This file connects using websockets to the VSCP demo server and show the live wind direction 
  from two different wind direction sensors in a gauge.  
  
  https://canvas-gauges.com/
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Don't cache the page -->
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="-1" />
  <title>Websocket Simple MQTT demo</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <script src="https://cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/all/gauge.min.js"></script>
  
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  
  <style>
    body {
      background-color: #f0f0f0;   /*  here is the color  */
      margin: 0 auto;
      padding: 0;
      width: 100%;
      color: #595959;
      font: normal 13px/1.8em Tahoma, Arial, Helvetica, sans-serif;
      text-align: center;
      letter-spacing: 0.06em;
    }
  </style>
  
  <!-- Favorite icon -->
  <link rel="icon" href="./images/favicon.ico">
</head>
<div id="gauge"></div>
<body>
  
  <a href="https://www.vscp.org"><img src="./images/logo/vscp_logo_text_box.png" alt="VSCP - The Very Simple Control Protocol" height="100"></a>
  <hr>

  <div class="container-fluid">
    <h1>VSCP weather station demo</h1>
    <p>
        This demo uses the gauge from <a href="https://canvas-gauges.com/" target="new">gauge.js</a> to display the wind direction from two different wind direction sensors. It displays
        <a href="https://grodansparadis.github.io/vscp-doc-spec/#/./class1.measurement?id=type6" target="new">CLASS1.MEASUREMENT, Type=6/VSCP_TYPE_MEASUREMENT_TEMPERATURE</a> values that comes from sensor=4
        This is real live data. Docs for the gauge is <a href="https://canvas-gauges.com/">here</a> and <a href="https://bernii.github.io/gauge.js/">here</a>
    </p>

    <p>
      The websocket connection used here is a secure TLS connection to the  <a href="https://github.com/grodansparadis/vscp/wiki/Demo">VSCP MQTT demo server</a>. 
      You can freely test this server for VSCP related experiments. It gets real time live events published from my (<a href="mailto:akhe@grodansparadis.com">akhe</a>) 
      office and home. See the link for information of events published. 
    </p>
    
    <p>
      Source for the demo is available <a href="https://github.com/grodansparadis/vscp-demo-mqtt-web">here</a>
    </p>

    <p>
      <a href="../index.html">Back to main demo page</a>
    </p>

    <hr>

    <h2>Weather station Demo</h2>
    <div class="container">	
      
      <hr>

      <h3>Temperature</h3>

      <!-- Temperatures -->
      <!-- Wind speed -->
      <div class="row">					
			  <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature garage -->
              <a href="https://www.vscp.org">
					      <canvas id="temp_garage"  ></canvas>
              </a>
            </div>
          </div>
        </div> 
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature garage -->
					    <canvas id="temp_garage_lower"  ></canvas>
            </div>
          </div>
        </div> 
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature garage -->
					    <canvas id="temp_garage_upper"  ></canvas>
            </div>
          </div>
        </div> 
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature east -->
					    <canvas id="temp_east"  ></canvas>
            </div>
          </div>
        </div>
        <div class="col-sm w-5" >
          <div class="row">
            <!-- Injecting linear gauge -->
            <div>
              <canvas id="dew_point_garage"  ></canvas>
            </div>
          </div>
        </div>
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature ground -->
					    <canvas id="temp_ground"  ></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="row">	   
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature west -->
					    <canvas id="temp_west"  ></canvas>
            </div>
          </div>
        </div>
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature south -->
					    <canvas id="temp_south"  ></canvas>
            </div>
          </div>
        </div>
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature green house -->
					    <canvas id="temp_green_house"  ></canvas>
            </div>
          </div>
        </div>        
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature Compost 1 -->
					    <canvas id="temp_compost1"  ></canvas>
            </div>
          </div>
        </div>
        <div class="col-sm w-5" >
          <div class="row">
            <div>
				      <!-- Temperature Compost 2 -->
					    <canvas id="temp_compost2"  ></canvas>
            </div>
          </div>
        </div>
      </div>

      <hr>

      <h3>Wind Speed</h3>

      <!-- Wind speed -->
      <div class="row">					
			  <div class="col-sm w-5" >
          <div class="row">	
            <div>
				      <!-- Injecting linear gauge -->
					    <canvas id="windspeed1"  ></canvas>
            </div>
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Max:</b> <span id="windspeed1_max">0</span> m/s
            </div>            
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Min:</b> <span id="windspeed1_min">0</span> m/s
            </div>            
          </div> 
          <div class="row">	
            <div  style="text-align: center;">
              <b>Average:</b> <span id="windspeed1_average">0</span> m/s
            </div>            
          </div>
				</div>
        <div class="col-sm w-15" >
          <div class="row">	
            <div>
				      <!-- Injecting linear gauge -->
					  <canvas id="windspeed2"  ></canvas>
            </div>
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Max:</b> <span id="windspeed2_max">0</span> m/s
            </div>            
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Min:</b> <span id="windspeed2_min">0</span> m/s
            </div>            
          </div> 
          <div class="row">	
            <div  style="text-align: center;">
              <b>Average:</b> <span id="windspeed2_average">0</span> m/s
            </div>            
          </div>
				</div>
        <div class="col-sm w-15" >
          <div class="row">	
            <div>
				      <!-- Injecting linear gauge -->
					    <canvas id="windspeed3"  ></canvas>
            </div>
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Max:</b> <span id="windspeed3_max">0</span> m/s
            </div>            
          </div>
          <div class="row">	
            <div  style="text-align: center;">
              <b>Min:</b> <span id="windspeed3_min">0</span> m/s
            </div>            
          </div> 
          <div class="row">	
            <div  style="text-align: center;">
              <b>Average:</b> <span id="windspeed3_average">0</span> m/s
            </div>            
          </div>
				</div>
		  </div>

      <hr>

      <h3>Wind Direction</h3>

      <!-- Wind direction -->
		  <div class="row">					
			  <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="winddir1"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="winddir2"  ></canvas>
				</div>
		  </div>

      <hr>
      
      <!-- Rain -->
      <div class="row">					
			  <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="rain1"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="rain2"  ></canvas>
				</div>
		  </div>	

      <hr>

      <h3>Radiation</h3>

      <!-- Radiation -->
		  <div class="row">					
			  <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="illuminance_east"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="illuminance_west"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="illuminance_north"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="illuminance_south"  ></canvas>
				</div>        
		  </div>
      <div class="row">	
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="illuminance_sensorpuck"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
				  <!-- Injecting linear gauge -->
					<canvas id="uvindex_sensorpuck"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
          <!-- Injecting linear gauge -->
          <canvas id="uvindex_west"  ></canvas>
        </div>
      </div>

      <hr>

      <h3>Other measurements</h3>

      <!-- Other -->
      <div class="row">	
        <div class="col-sm w-25" style="text-align: center;">
					<canvas id="humidity_garage"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
					<canvas id="pressure_garage"  ></canvas>
				</div>
        <div class="col-sm w-25" style="text-align: center;">
          <canvas id="pressure_air_garage"  ></canvas>
        </div>
        <div class="col-sm w-25" style="text-align: center;">
          <canvas id="gas_concentration_garage"  ></canvas>
        </div>
      </div>

      <div class="row">	
        <div class="col-sm w-25" style="text-align: center;">
          <canvas id="altitude_garage"  ></canvas>
        </div>
      </div>  

      <hr>

    </div>
  </div>
<hr />
Copyright &copy; 2000-2021 <a href="https://www.grodansparadis.com">Ake Hedman, the VSCP Project</a>


  <!-- JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"></script>

  <script type="text/javascript">

    (function() {

      var gauge_temp_garage_bme680 = new LinearGauge({
        renderTo: 'temp_garage',
        width: 100,
        height: 400,
        title: "Garage",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_garage_lower = new LinearGauge({
        renderTo: 'temp_garage_lower',
        width: 100,
        height: 400,
        title: "Garage Lower",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#FFFFFF",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_garage_upper = new LinearGauge({
        renderTo: 'temp_garage_upper',
        width: 100,
        height: 400,
        title: "Garage Upper",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_east = new LinearGauge({
        renderTo: 'temp_east',
        width: 100,
        height: 400,
        title: "East Air",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_dew_point = new LinearGauge({
        renderTo: 'dew_point_garage',
        width: 100,
        height: 400,
        title: "Dew Point",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_west = new LinearGauge({
        renderTo: 'temp_west',
        width: 100,
        height: 400,
        title: "West Air",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_south = new LinearGauge({
        renderTo: 'temp_south',
        width: 100,
        height: 400,
        title: "South Air",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_green_house = new LinearGauge({
        renderTo: 'temp_green_house',
        width: 100,
        height: 400,
        title: "Green House",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_ground = new LinearGauge({
        renderTo: 'temp_ground',
        width: 100,
        height: 400,
        title: "Ground East",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_compost1 = new LinearGauge({
        renderTo: 'temp_compost1',
        width: 100,
        height: 400,
        title: "Compost 1",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_temp_compost2 = new LinearGauge({
        renderTo: 'temp_compost2',
        width: 100,
        height: 400,
        title: "Compost 2",
        colorTitle: "#000000",
        units: "°C",
        minValue: -40,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 40,
        majorTicks: [
            "-40",
            "-30",
            "-20",
            "-10",
            "0",
            "10",
            "20",
            "30",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear",
        barWidth: 10,
        value: 0
      }).draw();

      var gauge_ws1 = new RadialGauge({
        renderTo: 'windspeed1',
        width: 300,
        height: 300,
        title: "Wind speed (Sparc Fun)",
        fontTitleSize: 19,
        colorTitle: "#000000",
        units: "m/s",
        valueDec: 0,
        minValue: 0,
        maxValue: 40,
        majorTicks: [
            "0",
            "5",
            "10",
            "15",
            "20",
            "25",
            "30",
            "35",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
              "from": 0,
              "to": 7,
              "color": "rgba(0, 255, 51, .75)"
            },
            {
              "from": 7,
              "to": 20,
              "color": "rgba(255, 255, 51, .75)"
            },
            {
              "from": 20,
              "to": 40,
              "color": "rgba(251, 50, 60, .75)"
            }
        ],
        colorPlate: "#fff",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_ws2 = new RadialGauge({
        renderTo: 'windspeed2',
        width: 300,
        height: 300,
        title: "Wind speed (Firstrate analog)",
        fontTitleSize: 19,
        colorTitle: "#000000",
        units: "m/s",
        valueDec: 0,
        minValue: 0,
        maxValue: 40,
        majorTicks: [
            "0",
            "5",
            "10",
            "15",
            "20",
            "25",
            "30",
            "35",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
              "from": 0,
              "to": 7,
              "color": "rgba(0, 255, 51, .75)"
            },
            {
              "from": 7,
              "to": 20,
              "color": "rgba(255, 255, 51, .75)"
            },
            {
              "from": 20,
              "to": 40,
              "color": "rgba(251, 50, 60, .75)"
            }
        ],
        colorPlate: "#fff",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_ws3 = new RadialGauge({
        renderTo: 'windspeed3',
        width: 300,
        height: 300,
        title: "Wind speed (Firstrate cnt)",
        fontTitleSize: 19,
        colorTitle: "#000000",
        units: "m/s",
        valueDec: 0,
        minValue: 0,
        maxValue: 40,
        majorTicks: [
            "0",
            "5",
            "10",
            "15",
            "20",
            "25",
            "30",
            "35",
            "40"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
              "from": 0,
              "to": 7,
              "color": "rgba(0, 255, 51, .75)"
            },
            {
              "from": 7,
              "to": 20,
              "color": "rgba(255, 255, 51, .75)"
            },
            {
              "from": 20,
              "to": 40,
              "color": "rgba(251, 50, 60, .75)"
            }
        ],
        colorPlate: "#fff",
        borderShadowWidth: 0,
        borders: true,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_wd1 = new RadialGauge({
        renderTo: 'winddir1',
        width: 300,
        height: 300,
        minValue: 0,
        maxValue: 360,
        majorTicks: [
            "N",
            "NE",
            "E",
            "SE",
            "S",
            "SW",
            "W",
            "NW",
            "N"
        ],
        minorTicks: 22,
        ticksAngle: 360,
        startAngle: 180,
        strokeTicks: false,
        highlights: false,
        colorPlate: "#888",
        colorMajorTicks: "#f5f5f5",
        colorMinorTicks: "#ddd",
        colorNumbers: "#ccc",
        colorNeedle: "rgba(240, 128, 128, 1)",
        colorNeedleEnd: "rgba(255, 160, 122, .9)",
        valueBox: true,
        valueDec: 0,
        valueTextShadow: false,
        colorCircleInner: "#fff",
        colorNeedleCircleOuter: "#111",
        needleCircleSize: 15,
        needleCircleOuter: false,
        animationRule: "linear",
        needleType: "line",
        needleStart: 75,
        needleEnd: 99,
        needleWidth: 3,
        borders: true,
        borderInnerWidth: 0,
        borderMiddleWidth: 0,
        borderOuterWidth: 10,
        colorBorderOuter: "#ccc",
        colorBorderOuterEnd: "#ccc",
        colorNeedleShadowDown: "#000",
        borderShadowWidth: 0,
        animationTarget: "plate",
        units: "° Sparc Fun",
        title: "Wind direction",
        fontTitleSize: 19,
        colorTitle: "#f5f5f5",
        colorUnits: "#c0c0c0",
        animationDuration: 1500
      });

      var gauge_wd2 = new RadialGauge({
        renderTo: 'winddir2',
        minValue: 0,
        maxValue: 360,
        majorTicks: [
            "N",
            "NE",
            "E",
            "SE",
            "S",
            "SW",
            "W",
            "NW",
            "N"
        ],
        minorTicks: 22,
        ticksAngle: 360,
        startAngle: 180,
        strokeTicks: false,
        highlights: false,
        colorPlate: "#888",
        colorMajorTicks: "#f5f5f5",
        colorMinorTicks: "#ddd",
        colorNumbers: "#ccc",
        colorNeedle: "rgba(240, 128, 128, 1)",
        colorNeedleEnd: "rgba(255, 160, 122, .9)",
        valueBox: true,
        valueDec: 0,
        valueTextShadow: false,
        colorCircleInner: "#fff",
        colorNeedleCircleOuter: "#ccc",
        needleCircleSize: 15,
        needleCircleOuter: false,
        animationRule: "linear",
        needleType: "line",
        needleStart: 75,
        needleEnd: 99,
        needleWidth: 3,
        borders: true,
        borderInnerWidth: 0,
        borderMiddleWidth: 0,
        borderOuterWidth: 10,
        colorBorderOuter: "#ccc",
        colorBorderOuterEnd: "#ccc",
        colorNeedleShadowDown: "#222",
        borderShadowWidth: 0,
        animationTarget: "plate",        
        title: "Wind direction",
        fontTitleSize: 19,
        colorTitle: "#f5f5f5",
        units: "° Firstrate",
        colorUnits: "#c0c0c0",
        animationDuration: 1500
      });

      var gauge_rain1 = new LinearGauge({
        renderTo: 'rain1',
        width: 400,
        height: 100,
        minValue: 0,
        maxValue: 160,
        title: "Rain sensor 1 - (mm)",
        fontTitleSize: 29,
        colorTitle: "#000000",
        units: "mm today",
  
        majorTicks: [
            "0",
            "20",
            "40",
            "60",
            "80",
            "100",
            "120",
            "140",
            "160"
        ],
        minorTicks: 10,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: false,
        barBeginCircle: false,
        tickSide: "left",
        numberSide: "left",
        needleSide: "left",
        needleType: "line",
        needleWidth: 3,
        colorNeedle: "#222",
        colorNeedleEnd: "#222",
        animationDuration: 1500,
        animationRule: "linear",
        animationTarget: "plate",
        barWidth: 5,
        ticksWidth: 50,
        ticksWidthMinor: 15
      }).draw();

      var gauge_rain2 = new LinearGauge({
        renderTo: 'rain2',
        width: 400,
        height: 100,
        minValue: 0,
        maxValue: 160,
        title: "Rain sensor 2 - (mm)",
        fontTitleSize: 29,
        colorTitle: "#000000",
        units: "mm today",
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 10,
        strokeTicks: true,
        colorPlate: "#fff",
        colorBarProgress: "#327ac0",
        colorBar: "#f5f5f5",
        borderShadowWidth: 0,
        borders: false,
        barBeginCircle: false,
        tickSide: "left",
        numberSide: "left",
        needleSide: "left",
        needleType: "line",
        needleWidth: 3,
        colorNeedle: "#222",
        colorNeedleEnd: "#222",
        animationDuration: 1500,
        animationRule: "linear",
        animationTarget: "plate",
        barWidth: 5,
        ticksWidth: 50,
        ticksWidthMinor: 15
      }).draw();

      var gauge_illuminance_east = new RadialGauge({
        renderTo: 'illuminance_east',
        width: 300,
        height: 300,
        title: "Illuminance East",
        units: "lux * 1000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 70000,
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 160,
            "to": 220,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_illuminance_west = new RadialGauge({
        renderTo: 'illuminance_west',
        width: 300,
        height: 300,
        title: "Illuminance West",
        units: "lux * 1000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 70000,
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 160,
            "to": 220,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_illuminance_north = new RadialGauge({
        renderTo: 'illuminance_north',
        width: 300,
        height: 300,
        title: "Illuminance North",
        units: "lux * 1000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 70000,
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 160,
            "to": 220,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();
      
      var gauge_illuminance_south = new RadialGauge({
        renderTo: 'illuminance_south',
        width: 300,
        height: 300,
        title: "Illuminance South",
        units: "lux * 1000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 70000,
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 160,
            "to": 220,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_illuminance_south = new RadialGauge({
        renderTo: 'illuminance_sensorpuck',
        width: 300,
        height: 300,
        title: "Illuminance West Sensorpuck",
        units: "lux * 1000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 70000,
        majorTicks: [
          "0",
          "10",
          "20",
          "30",
          "40",
          "50",
          "60",
          "70"
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 160,
            "to": 220,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_uvindex_west = new RadialGauge({
        renderTo: 'uvindex_west',
        width: 300,
        height: 300,
        title: "UV Index West VEML6070",
        units: "idx",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 15,
        majorTicks: [
            "0",
            "3",
            "6",
            "9",
            "12",
            "15",
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 6,
            "to": 15,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_uvindex_sensorpuck = new RadialGauge({
        renderTo: 'uvindex_sensorpuck',
        width: 300,
        height: 300,
        title: "UV Index West Sensorpuck",
        units: "idx",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        maxValue: 15,
        majorTicks: [
            "0",
            "3",
            "6",
            "9",
            "12",
            "15",
        ],
        minorTicks: 2,
        strokeTicks: true,
        highlights: [
          {
            "from": 6,
            "to": 15,
            "color": "rgba(200, 50, 50, .75)"
          }
        ],
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_humidity_garage = new RadialGauge({
        renderTo: 'humidity_garage',
        width: 300,
        height: 300,
        title: "Humidity",
        units: "%",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 100,
        majorTicks: [
            "10",
            "20",
            "30",
            "40",
            "50",
            "60",
            "70",
            "80",
            "90",
            "100"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_pressure_garage = new RadialGauge({
        renderTo: 'pressure_garage',
        width: 300,
        height: 300,
        title: "Pressure (Raw)",
        units: "hPa",
        minValue: 900,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 2,
        maxValue: 1040,
        majorTicks: [
            "900",
            "920",
            "940",
            "960",
            "980",
            "1000",
            "1020",
            "1040"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_pressure_air_garage = new RadialGauge({
        renderTo: 'pressure_air_garage',
        width: 300,
        height: 300,
        title: "Pressure (Sea)",
        units: "hPa",
        minValue: 900,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 2,
        maxValue: 1040,
        majorTicks: [
            "900",
            "920",
            "940",
            "960",
            "980",
            "1000",
            "1020",
            "1040"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();


      // https://randomnerdtutorials.com/bme680-sensor-arduino-gas-temperature-humidity-pressure/
      var gauge_gas_concentration_garage = new RadialGauge({
        renderTo: 'gas_concentration_garage',
        width: 300,
        height: 300,
        title: "Air Quality",
        units: "Ω * 1000000",
        minValue: 0,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 3000000,
        majorTicks: [
            "0",
            "1",
            "2",
            "3"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      var gauge_altitude_garage = new RadialGauge({
        renderTo: 'altitude_garage',
        width: 300,
        height: 300,
        title: "Calculated altitude",
        units: "m",
        minValue: 300,
        startAngle: 90,
        ticksAngle: 180,
        valueBox: true,
        valueDec: 0,
        maxValue: 500,
        majorTicks: [
            "300",
            "320",
            "340",
            "360",
            "380",
            "400",
            "420",
            "440",
            "460",
            "480",
            "500"
        ],
        minorTicks: 2,
        strokeTicks: true,
        colorPlate: "#f0f0f0",
        borderShadowWidth: 0,
        borders: false,
        needleType: "arrow",
        needleWidth: 2,
        needleCircleSize: 7,
        needleCircleOuter: true,
        needleCircleInner: false,
        animationDuration: 1500,
        animationRule: "linear"
      }).draw();

      gauge_wd1.value = 90;  // Just a value
      gauge_wd1.draw();

      gauge_wd2.value = 90;  // Just a value
      gauge_wd2.draw();
  
      gauge_ws1.value = 0.1;  // Just a value
      gauge_ws2.value = 0.1;  // Just a value
      gauge_ws3.value = 0.1;  // Just a value

      gauge_rain1.value = 12;  // Just a value
      gauge_rain2.value = 12;  // Just a value
      // For random movements
      // setInterval(() => {
      //   gauge.value = Math.random() * -220 + 220;
      // }, 1000);

      const clientId = 'vscp-mqtt-js-test_' + Math.random().toString(16).substr(2, 8)

      const host = 'wss://demo.vscp.org:9901'
      //const host = 'ws://test.mosquitto.org:8081'  // Works without credentials

      // Wait until the whole website is loaded
      $( document ).ready( function() {
        const optionsMQTT = {
          keepalive: 30,
          clientId: clientId,
          protocolId: 'MQTT',
          protocolVersion: 4,
          clean: true,
          reconnectPeriod: 3000,
          connectTimeout: 30 * 1000,
          will: {
            topic: 'WillMsg',
            payload: 'Connection Closed abnormally..!',
            qos: 0,
            retain: false
          },
          rejectUnauthorized: false,
          username: "vscp",
          password: "secret"
        }

        console.log('connecting mqtt client to ', host)
        const client = mqtt.connect(host, optionsMQTT)

        client.on('error', (err) => {
          console.log('Connection error: ', err)
          client.end()
        })

        client.on('reconnect', () => {
          console.log('Reconnecting...')
        })

        client.on('connect', () => {
          console.log('Client connected:' + clientId)
          
          // Garage temp upper/lower
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:01:00:02/#', { qos: 0 })
          
          // Ground temperature east
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:03/#', { qos: 0 })
          
          // Air temperature east
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:04/#', { qos: 0 })
          
          // Illuminance east
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:05/#', { qos: 0 })

          // Air temperature west
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:03/#', { qos: 0 })

          // Illuminance west
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:04/#', { qos: 0 })
          
          // UV Index west
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:06/#', { qos: 0 })

          // Pi2 CAN4VSCP (temp south/compost1/compos2)
          // Limit subscribe to temperature from node=2
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:04:01:00:02/1040/6/2/#', { qos: 0 })

          // UV Index Sensorpuck
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:F7:D4:81:CA:E1:4A:AA:00:04/#', { qos: 0 })

          // Illuminance Sensorpuck
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:F7:D4:81:CA:E1:4A:AA:00:03/#', { qos: 0 })

          // BME680
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:AF:06:38:00:03/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:01/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:02/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:03/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:04/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:05/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:06/#', { qos: 0 })
          client.subscribe('vscp/25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:07/#', { qos: 0 })
          client.subscribe('vscp/FF:FF:FF:FF:FF:FF:FF:FF:61:00:08:01:92:AF:A8:10/#', { qos: 0 })                    
        })

        client.on('message', (topic, message, packet) => {

          //console.log('Received Message: ' + message.toString() + '\nOn topic: ' + topic)
        
          const ev = JSON.parse(message.toString());
          //console.log("Measurement:", ev.measurement.value);
          
          // Temperature garage lower (box)
          // if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:AF:06:38:00:04") {
          //   if (ev.measurement.sensorindex == 0) {
          //     gauge_temp_garage_upper.value = ev.measurement.value; 
          //   }
          // }
          
          // Pi3 Daemon CAN4VSCP interface
          if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:01:00:02") {
            if (ev.measurement.sensorindex == 0) {
              gauge_temp_garage_upper.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 4) {
              gauge_temp_garage_lower.value = ev.measurement.value; 
            }
          }

          // Pi10 temperature east ground
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:03") {
            gauge_temp_ground.value = ev.measurement.value;
          }

          // Pi10 temperature east air
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:04") {
            gauge_temp_east.value = ev.measurement.value;
          }

          // Pi10 Illuminance east
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:60:E3:27:1D:75:C3:00:05") {
            gauge_illuminance_east.value = ev.measurement.value;
          }

          // Pi6 temperature west air
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:03") {
            gauge_temp_west.value = ev.measurement.value;
          }

          // Pi6 illuminance west
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:04") {
            gauge_illuminance_west.value = ev.measurement.value;
          }

          // Pi6 UV Index west
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:8B:57:15:00:06") {
            gauge_uvindex_west.value = ev.vscpData[2];
          }

          // Pi1 temperature green house
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FF:61:00:08:01:92:AF:A8:10") {
            gauge_temp_green_house.value = ev.measurement.value;
          }

          // Pi2 CAN4VSCP (temp south/compost1/compos2)
          if ( ev.vscpGuid =="25:00:00:00:00:00:00:00:00:00:00:00:04:01:00:02") {
            if (ev.measurement.sensorindex == 1) {
              gauge_temp_south.value = ev.measurement.value;
            }
            else if (ev.measurement.sensorindex == 4) {
              gauge_temp_compost1.value = ev.measurement.value;
            }
            if (ev.measurement.sensorindex == 5) {
              gauge_temp_compost2.value = ev.measurement.value;
            }
          }

          // Sensorpuck illuminance
          if ( ev.vscpGuid =="FF:FF:FF:FF:FF:FF:FF:F7:D4:81:CA:E1:4A:AA:00:03") {
            gauge_illuminance_sensorpuck.value = ev.measurement.value;
          }

          // Sensorpuck UV Index
          if ( ev.vscpGuid =="FF:FF:FF:FF:FF:FF:FF:F7:D4:81:CA:E1:4A:AA:00:04") {
            gauge_uvindex_sensorpuck.value = ev.vscpData[2];
          }

          // BME680
          if (ev.vscpGuid == "FF:FF:FF:FF:FF:FF:FF:FE:B8:27:EB:AF:06:38:00:03") {
            if (ev.measurement.sensorindex == 0) {
              gauge_temp_garage_bme680.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 1) {
              // Humidity
              gauge_humidity_garage.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 2) {
              // Raw Pressure
              gauge_pressure_garage.value = ev.measurement.value/100; 
            }
            else if (ev.measurement.sensorindex == 3) {
              // Sea level adjusted pressure
              gauge_pressure_air_garage.value = ev.measurement.value/100; 
            }
            else if (ev.measurement.sensorindex == 4) {
              // Gas resistance
              gauge_gas_concentration_garage.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 5) {
              // Altitude
              gauge_altitude_garage.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 6) {
              // Dew Point
              gauge_temp_dew_point.value = ev.measurement.value; 
            }
          }
          // Wind speed Sparc Fun (count)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:01") {
            if (ev.measurement.sensorindex == 0) {
              gauge_ws1.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 1) {
              document.getElementById('windspeed1_max').innerHTML = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 2) {
              document.getElementById('windspeed1_min').innerHTML = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 3) {
              document.getElementById('windspeed1_average').innerHTML = ev.measurement.value; 
            }
          }
          // Wind speed Firstrate (analog)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:02") {
            if (ev.measurement.sensorindex == 0) {
              gauge_ws2.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 1) {
              document.getElementById('windspeed2_max').innerHTML = ev.measurement.value;
            }
            else if (ev.measurement.sensorindex == 2) {
              document.getElementById('windspeed2_min').innerHTML = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 3) {
              document.getElementById('windspeed2_average').innerHTML = ev.measurement.value; 
            }
          }
          // Wind speed Firstrate (count)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:03") {
            if (ev.measurement.sensorindex == 0) {              
              gauge_ws3.value = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 1) {
              document.getElementById('windspeed3_max').innerHTML = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 2) {
              document.getElementById('windspeed3_min').innerHTML = ev.measurement.value; 
            }
            else if (ev.measurement.sensorindex == 3) {
              document.getElementById('windspeed3_average').innerHTML = ev.measurement.value; 
            }
          }
          // Wind Direction Sparc Fun (count)  
          if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:04") {
            gauge_wd1.value = ev.measurement.value;
          }
          // Wind direction Firstrate (analog)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:05") {
            gauge_wd2.value = ev.measurement.value;          
          }
          // Wind direction Firstrate (analog)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:06") {
            gauge_rain1.value = ev.measurement.value;          
          }
          // Wind direction Firstrate (analog)
          else if (ev.vscpGuid == "25:00:00:00:00:00:00:00:00:00:00:00:05:00:01:07") {
            gauge_rain2.value = ev.measurement.value;          
          }
          
                   
        })

        client.on('close', () => {
          console.log(clientId + ' disconnected')
        })

      }); // Document ready

    })();

  </script>
</body>
</html>

